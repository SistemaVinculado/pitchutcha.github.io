<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador Isolado - Supabase Observability</title>
    <style>
        /* Estilos essenciais para a página */
        body, html {
            margin: 0;
            padding: 0;
            height: 100vh; /* Usa a altura total da tela */
            width: 100vw; /* Usa a largura total da tela */
            overflow: hidden; /* Esconde barras de rolagem desnecessárias */
            background-color: #111827; /* Cor de fundo escura, similar ao site */
            display: grid;
            place-items: center; /* Centraliza o conteúdo */
        }

        /* Estilos para o contêiner e o iframe */
        #iframe-container {
            width: 100%;
            max-width: 1280px; /* Largura máxima para visualização desktop */
            height: 80vh; /* Ocupa 80% da altura da tela */
            overflow: hidden; /* Garante que nada escape do contêiner */
            border: 1px solid #374151; /* Borda sutil */
            border-radius: 8px; /* Cantos arredondados */
            position: relative;
        }

        iframe {
            border: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>

    <div id="iframe-container">
        <iframe id="site-frame" src="https://supabase.com/edge-functions"></iframe>
    </div>

    <script>
        const iframe = document.getElementById('site-frame');

        // Esta função será executada quando o conteúdo do iframe estiver totalmente carregado
        iframe.onload = function() {
            try {
                const iframeDoc = iframe.contentWindow.document;

                // Encontra a seção de observabilidade que queremos manter
                const observabilitySection = iframeDoc.getElementById('observability');
                
                if (!observabilitySection) {
                    console.error("A seção 'observability' não foi encontrada. O site pode ter mudado.");
                    return;
                }

                // Pega todos os filhos diretos do elemento <main>
                const mainChildren = iframeDoc.querySelector('main').children;

                // Loop para remover todos os elementos exceto o ancestral da nossa seção
                for (let element of mainChildren) {
                    // Se o elemento não for o que contém nossa seção, ele é removido
                    if (!element.contains(observabilitySection)) {
                        element.style.display = 'none';
                    }
                }
                
                // Remove o cabeçalho e o rodapé
                const header = iframeDoc.querySelector('body > div > div:first-child');
                const footer = iframeDoc.querySelector('footer');
                if (header) header.style.display = 'none';
                if (footer) footer.style.display = 'none';

                // Rola a página para que nossa seção fique no topo da janela do iframe
                observabilitySection.scrollIntoView();

            } catch (e) {
                console.error("Ocorreu um erro ao tentar manipular o iframe. Isso pode ser devido a políticas de segurança (CORS) se você estiver rodando este arquivo localmente de forma incorreta.", e);
            }
        };
    </script>

</body>
</html>
