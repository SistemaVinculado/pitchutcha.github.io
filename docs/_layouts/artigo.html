<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <script>(function(){try{var t=localStorage.getItem('theme');if(t==='dark'){document.documentElement.classList.add('dark');}}catch(e){}})();</script>
    
    <title>Pitchutcha - {{ page.title | default: "Artigo" }}</title>
    <meta name="base-url" content="{{ '/' | relative_url }}">
    <meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}">
    <meta property="og:title" content="{{ page.title }}">
    <meta property="og:description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}">
    <meta property="og:image" content="{{ page.image }}">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ page.title }}">
    <meta name="twitter:description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}">
    <meta name="twitter:image" content="{{ page.image }}">
    
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <link rel="preload" href="{{ '/css/style.css' | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{{ '/css/style.css' | relative_url }}"></noscript>
    
    <link rel="icon" href="data:image/x-icon;base64," type="image/x-icon">
</head>
<body class="bg-[var(--background-primary)] text-[var(--text-primary)]">
    <div id="aria-live-region" class="sr-only" aria-live="polite"></div>
    <div id="toast-notification" class="toast-notification"></div>

    <div class="flex flex-col h-screen overflow-hidden">
        <header class="flex h-16 flex-shrink-0 items-center justify-between whitespace-nowrap border-b border-solid border-[var(--secondary-color)] px-4">
            <div class="flex items-center gap-8">
                <div class="flex items-center gap-3 text-[var(--text-primary)]">
                    <svg class="h-8 w-8 text-[var(--primary-color)]" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM14.29 15.71L12 13.41L9.71 15.71C9.32 16.1 8.68 16.1 8.29 15.71C7.9 15.32 7.9 14.68 8.29 14.29L10.59 12L8.29 9.71C7.9 9.32 7.9 8.68 8.29 8.29C8.68 7.9 9.32 7.9 9.71 8.29L12 10.59L14.29 8.29C14.68 7.9 15.32 7.9 15.71 8.29C16.1 8.68 16.1 9.32 15.71 9.71L13.41 12L15.71 14.29C16.09 14.68 16.09 15.32 15.71 15.71C15.32 16.1 14.68 16.1 14.29 15.71Z"></path></svg>
                    <h1 class="text-xl font-bold">Pitchutcha</h1>
                </div>
                <nav class="hidden md:flex items-center gap-6">
                    <a class="text-sm font-medium text-[var(--text-primary)] hover:text-[var(--primary-color)] transition-colors" href="{{ '/docs.html' | relative_url }}">Documentação</a>
                    <a class="text-sm font-medium text-[var(--text-primary)] hover:text-[var(--primary-color)] transition-colors" href="{{ '/algoritmos.html' | relative_url }}">Referência da API</a>
                    <a class="text-sm font-medium text-[var(--text-primary)] hover:text-[var(--primary-color)] transition-colors" href="#">Suporte</a>
                    <a class="text-sm font-medium text-[var(--text-primary)] hover:text-[var(--primary-color)] transition-colors" href="#">Comunidade</a>
                </nav>
            </div>
            <div class="flex items-center gap-4">
                <form class="header-search-form relative hidden sm:block">
                    <label>
                        <span class="sr-only">Pesquisar</span>
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                            <i data-lucide="search" class="w-5 h-5 text-[var(--text-secondary)]"></i>
                        </span>
                        <input class="form-input block w-full rounded-md border-transparent bg-[var(--secondary-color)] py-2 pl-10 pr-3 text-sm placeholder:text-[var(--text-secondary)] focus:border-[var(--primary-color)] focus:outline-none focus:ring-[var(--primary-color)]" placeholder="Pesquisar documentação..." type="search"/>
                    </label>
                </form>
                <button class="relative rounded-full bg-[var(--secondary-color)] p-2 text-[var(--text-primary)] hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] focus:ring-offset-2">
                    <span class="sr-only">Ver notificações</span>
                    <i data-lucide="bell" class="w-5 h-5"></i>
                </button>
                <button class="rounded-full" id="theme-toggle">
                    <span class="sr-only">Alternar tema</span>
                    <i data-lucide="moon" class="w-5 h-5 text-[var(--text-primary)]"></i>
                </button>
            </div>
        </header>
        <main class="flex flex-1 overflow-hidden">
            <aside class="w-64 flex-shrink-0 border-r border-[var(--secondary-color)] p-4 overflow-y-auto">
                <h2 class="mb-4 text-sm font-semibold uppercase tracking-wider text-[var(--text-secondary)]">Nesta página</h2>
                <nav id="toc-container" class="space-y-2"></nav>
            </aside>
            <div class="flex-1 overflow-y-auto p-8 md:p-12">
                <div class="mb-8 flex items-center space-x-2 text-sm text-gray-500 flex-wrap">
                    <a class="hover:text-[var(--primary-color)] flex-shrink-0" href="{{ '/docs.html' | relative_url }}">Início</a>
                    <span class="flex-shrink-0">/</span>
                    <a class="hover:text-[var(--primary-color)] min-w-0 truncate" href="{{ page.category | slugify | prepend: '/' | append: '.html' | relative_url }}" title="{{ page.category }}">{{ page.category }}</a>
                    <span class="flex-shrink-0">/</span>
                    <span class="text-[var(--text-primary)] font-medium min-w-0 truncate" title="{{ page.title }}">{{ page.title }}</span>
                </div>

                {{ content }}

                {% if page.previous.url or page.next.url %}
                <hr class="my-12 border-[var(--secondary-color)]"/>
                <div class="mt-12 flex justify-between">
                    {% if page.previous.url %}
                    <a class="inline-flex items-center gap-2 rounded-md border border-[var(--secondary-color)] bg-[var(--background-primary)] px-4 py-2 text-sm font-medium text-[var(--text-primary)] hover:bg-[var(--secondary-color)]" href="{{page.previous.url | relative_url}}">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i>
                        <span>Anterior: {{ page.previous.title }}</span>
                    </a>
                    {% endif %}
                    {% if page.next.url %}
                    <a class="inline-flex items-center gap-2 rounded-md border border-[var(--secondary-color)] bg-[var(--background-primary)] px-4 py-2 text-sm font-medium text-[var(--text-primary)] hover:bg-[var(--secondary-color)] ml-auto" href="{{page.next.url | relative_url}}">
                        <span>Próximo: {{ page.next.title }}</span>
                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                    </a>
                    {% endif %}
                </div>
                {% endif %}
                
                <div class="mt-8 flex justify-end">
                    <p class="text-sm text-[var(--text-secondary)]">Última atualização: {{ page.date | date: "%-d de %B de %Y" }}</p>
                </div>
                
                {% include footer.html %}
            </div>
        </main>
    </div>

    {% include scripts.html %}

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        const copyIconSVG = `
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" fill="currentColor">
                <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path>
                <path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
            </svg>`;
        
        const checkIconSVG = `
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" fill="currentColor" class="text-green-500">
                <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
            </svg>`;

        function showToast(message) {
            const toast = document.getElementById('toast-notification');
            if (toast) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }
        
        function announceToScreenReader(message) {
            const liveRegion = document.getElementById('aria-live-region');
            if (liveRegion) {
                liveRegion.textContent = message;
                setTimeout(() => {
                    liveRegion.textContent = '';
                }, 1000);
            }
        }

        document.querySelectorAll("figure.highlight, div.highlighter-rouge").forEach(codeBlock => {
            const codeElement = codeBlock.querySelector("pre > code");
            if (!codeElement) return;

            const langMatch = codeElement.className.match(/language-(\w+)/);
            if (langMatch && langMatch[1]) {
                const lang = langMatch[1];
                const langTag = document.createElement('span');
                langTag.className = 'code-language-tag';
                langTag.textContent = lang;
                codeBlock.appendChild(langTag);
            }

            const button = document.createElement("button");
            button.className = "absolute top-2 right-2 p-2 text-gray-400 bg-gray-800 rounded-md hover:bg-gray-700 hover:text-white transition-colors";
            button.innerHTML = copyIconSVG;
            button.setAttribute("aria-label", "Copiar código");

            button.addEventListener("click", () => {
                let elementToCopy = codeBlock.querySelector('.rouge-code pre, .rouge-code code');
                if (!elementToCopy) {
                    elementToCopy = codeElement;
                }
                const code = elementToCopy.innerText;

                navigator.clipboard.writeText(code).then(() => {
                    button.innerHTML = checkIconSVG;
                    showToast("Copiado para a área de transferência!");
                    announceToScreenReader("Código copiado com sucesso.");

                    setTimeout(() => {
                        button.innerHTML = copyIconSVG;
                    }, 2000);
                }).catch(err => {
                    console.error("Falha ao copiar código: ", err);
                });
            });

            codeBlock.appendChild(button);
        });
    });
    </script>
</body>
</html>
