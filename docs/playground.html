<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Space+Grotesk%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <title>Pitchutcha Code Playground</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
        :root {
            --primary-50: #eef6fe;
            --primary-100: #dbeafe;
            --primary-200: #bfdeff;
            --primary-300: #93c5fd;
            --primary-400: #60a5fa;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --primary-800: #1e40af;
            --primary-900: #1e3a8a;
            --primary-950: #172554;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200" style='font-family: "Space Grotesk", "Noto Sans", sans-serif;'>
<div class="flex h-screen w-full flex-col">
    <header class="flex h-16 shrink-0 items-center justify-between border-b border-gray-800 px-6">
        <div class="flex items-center gap-3">
            <svg class="h-6 w-6 text-primary-500" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill="currentColor" fill-rule="evenodd"></path>
            </svg>
            <h1 class="text-lg font-bold">Code Playground</h1>
        </div>
        <button class="text-sm font-medium text-gray-400 hover:text-white" onclick="window.close()">Fechar</button>
    </header>
    <main class="flex-1 overflow-auto bg-gray-950 p-6">
        <h2 class="text-xl font-semibold mb-4">Editor de Código</h2>
        <div class="h-full overflow-hidden rounded-md border border-gray-800 bg-[#0d1117]">
            <pre class="relative p-4 font-mono text-sm h-full"><code id="code-editor-content" class="language-python" contenteditable="true" spellcheck="false">Carregando código...</code></pre>
        </div>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const codeContainer = document.getElementById('code-editor-content');
        if (codeContainer) {
            const urlParams = new URLSearchParams(window.location.search);
            const encodedCode = urlParams.get('code');

            if (encodedCode) {
                try {
                    // O código é enviado em Base64 para garantir que caracteres especiais não quebrem a URL
                    const decodedCode = atob(encodedCode);
                    codeContainer.textContent = decodedCode;
                } catch (e) {
                    console.error("Erro ao decodificar o código:", e);
                    codeContainer.textContent = "Erro: Não foi possível carregar o código.";
                }
            } else {
                codeContainer.textContent = "Nenhum código fornecido. Edite aqui ou volte e clique em 'Editar' em um bloco de código.";
            }
        }
    });
</script>

</body>
</html>
