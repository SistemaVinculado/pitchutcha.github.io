const sampleCode="<!doctype html>\n<html>\n<head>\n<title>Meu Site</title>\n<style>\n.btn{color:#fff;padding:6px;}\n</style>\n</head>\n<body>\n<h1>Olá mundo</h1>\n<script>\nconst x=1\nconsole.log(x)\n</script>\n</body>\n</html>";async function startAnalysis(e){const t=document.getElementById("pbBar"),n=document.getElementById("statusText"),o=document.getElementById("pulse");t.style.width="0%",n.innerText="Analisando...",o.style.display="inline-block";const a=e.map(e=>({startLineNumber:e.line,startColumn:e.column,endLineNumber:e.endLine||e.line,endColumn:e.endColumn||e.column+1,message:e.message,severity:"error"===e.severity?monaco.MarkerSeverity.Error:"warning"===e.severity?monaco.MarkerSeverity.Warning:monaco.MarkerSeverity.Info,source:e.file})),r=a.length;let s=[];for(let e=0;e<a.length;e++){await new Promise(e=>setTimeout(e,400+300*Math.random())),s.push(a[e]);const r=window.editor.getModel();monaco.editor.setModelMarkers(r,"eslint",s);const i=Math.round((e+1)/r*100);t.style.width=i+"%",log("Encontrado: "+a[e].message+" (linha "+a[e].startLineNumber+")")}n.innerText=`Análise concluída — ${r} item(s)`,o.style.display="none"}function log(e){const t=document.getElementById("log");t.innerText=`[${new Date().toLocaleTimeString()}] ${e}\n`+t.innerText}require.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.39.0/min/vs"}}),require(["vs/editor/editor.main"],function(){window.editor=monaco.editor.create(document.getElementById("editorInner"),{value:sampleCode,language:"html",theme:"vs-light",automaticLayout:!0,minimap:{enabled:!1},glyphMargin:!0,folding:!0}),document.getElementById("runBtn").addEventListener("click",()=>startAnalysis(exampleReport)),document.getElementById("loadReportBtn").addEventListener("click",async()=>{log("Carregando report1.json...");const e=await fetch("report1.json").then(e=>e.json());startAnalysis(e)})});const exampleReport=[{file:"index.html",line:8,column:13,endLine:8,endColumn:14,severity:"warning",message:"Missing semicolon."},{file:"index.html",line:6,column:9,endLine:6,endColumn:30,severity:"error",message:"Unexpected token in CSS."}];
