document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('meta[name="base-url"]')?.content||"",t=document.getElementById("overall-status-indicator"),o=document.getElementById("overall-status-text"),n=document.getElementById("detailed-status-container");if(t&&n){const s=[{name:"Página Principal",url:"index.html",type:"Página"},{name:"Página de Algoritmos",url:"algoritmos.html",type:"Página"},{name:"Página de Estrutura de Dados",url:"estruturas-de-dados.html",type:"Página"},{name:"Página de Busca",url:"search.html",type:"Página"},{name:"Página de Status",url:"status.html",type:"Página"},{name:"CSS Principal",url:"css/style.css",type:"Recurso"},{name:"JS Principal",url:"js/script.js",type:"Recurso"},{name:"JS da Busca",url:"js/search.js",type:"Recurso"},{name:"Painel de Dev",url:"js/dev-panel.js",type:"Recurso"},{name:"Banco de Dados da Busca",url:"search.json",type:"Recurso",checkIntegrity:!0}],a=1e3;async function r(){let r="operational";for(const l of s){const s=performance.now();let c="outage",i="";try{const u=await fetch(`${e}${l.url}`,{cache:"no-store"}),d=performance.now()-s;u.ok?l.checkIntegrity?await u.text().then(e=>{""===e.trim()?(c="outage",i="Falha: Arquivo está vazio. Dica: Verifique se o conteúdo não foi apagado.",r="outage"):(JSON.parse(e),c="operational",i=`Componente íntegro e operacional (${d.toFixed(0)}ms).`)}):d>a?(c="degraded",i=`Aviso: Componente com lentidão (${d.toFixed(0)}ms). Dica: Verifique o tamanho do arquivo.`,"operational"===r&&(r="degraded")):(c="operational",i=`Componente operacional (${d.toFixed(0)}ms).`):(c="outage",i=`Falha: Arquivo não encontrado (Erro ${u.status}). Dica: Verifique o nome e o caminho do arquivo.`,r="outage")}catch(e){c="outage",i=`Falha Crítica: ${e.message}. Dica: Verifique se o arquivo está corrompido ou se há erro de rede.`,r="outage"}l(l.name,c,i)}c(r)}function l(e,t,o){const s={operational:{text:"Operational",pulseColor:"ping-green",dotColor:"bg-green-500",textColor:"text-green-600"},degraded:{text:"Degraded",pulseColor:"ping-yellow",dotColor:"bg-yellow-500",textColor:"text-yellow-600"},outage:{text:"Outage",pulseColor:"ping-red",dotColor:"bg-red-500",textColor:"text-red-500"}},a=s[t]||{text:"Unknown",pulseColor:"ping-gray",dotColor:"bg-gray-400",textColor:"text-gray-400"};const r=`
            <div class="flex items-center justify-between p-4 border-b border-[var(--secondary-color)] last:border-b-0">
                <div>
                    <p class="text-[var(--text-primary)] font-semibold">${e}</p>
                    <p class="text-sm text-[var(--text-secondary)]">${o}</p>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <span class="relative flex h-3 w-3">
                        <span class="ping-pulse ${a.pulseColor}"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 ${a.dotColor}"></span>
                    </span>
                    <span class="capitalize font-medium ${a.textColor}">${a.text}</span>
                </div>
            </div>
        `;n.insertAdjacentHTML("beforeend",r)}function c(e){const n={operational:{pulseColor:"ping-green",dotColor:"bg-green-500",text:"Todos os sistemas operacionais",textColor:"text-green-600"},degraded:{pulseColor:"ping-yellow",dotColor:"bg-yellow-500",text:"Performance degradada",textColor:"text-yellow-600"},outage:{pulseColor:"ping-red",dotColor:"bg-red-500",text:"Falha crítica no sistema",textColor:"text-red-500"}},s=n[e]||n.degraded;const a=`
            <span class="ping-pulse ${s.pulseColor}"></span>
            <span class="relative inline-flex rounded-full h-3 w-3 ${s.dotColor}"></span>
        `;t.innerHTML=a,o.className=s.textColor,o.textContent=s.text}r()}});
