document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("toc-container"),t=document.querySelector("article");if(e&&t){const n=t.querySelectorAll("h2");if(0===n.length)return void(e.innerHTML='<p class="text-sm text-[var(--text-secondary)]">Não há seções nesta página.</p>');const o=[],c=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-");n.forEach(t=>{const n=c(t.textContent);if(!n)return;t.id=n;const s=document.createElement("a");s.className="block rounded-md px-3 py-2 text-sm font-medium text-[var(--text-primary)] hover:bg-[var(--secondary-color)] transition-colors",s.href=`#${n}`,s.textContent=t.textContent,e.appendChild(s),o.push(s)});const s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.id,n=document.querySelector(`#toc-container a[href="#${t}"]`);o.forEach(e=>e.classList.remove("active-toc")),n&&n.classList.add("active-toc")}}) },{rootMargin:"-20% 0px -70% 0px",threshold:0});n.forEach(e=>s.observe(e));const a=document.createElement("style");a.textContent=".active-toc { background-color: var(--secondary-color); color: var(--primary-color); font-weight: 600; }",document.head.appendChild(a)}});
