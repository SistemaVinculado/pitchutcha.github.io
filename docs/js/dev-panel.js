document.addEventListener("DOMContentLoaded",()=>{if(window.self!==window.top){return}const e=document.createElement("script");e.src="js/vendor/axe.min.js",document.head.appendChild(e);const t=`
        <div id="dev-tools-trigger" class="fixed bottom-4 right-4 z-[100] bg-slate-800 text-white p-3 rounded-full shadow-lg cursor-pointer hover:bg-slate-700 transition-transform hover:scale-110">
            <span class="material-symbols-outlined">developer_mode</span>
        </div>
        <div id="dev-panel" class="hidden fixed bottom-0 left-0 w-full h-2/3 bg-gray-900 text-white shadow-2xl z-[99] flex flex-col font-mono text-sm">
            <div class="flex items-center justify-between bg-gray-800 p-2 border-b border-gray-700">
                <div class="flex items-center gap-4 min-w-0">
                    <h2 class="font-bold text-lg px-2 flex-shrink-0">Pitchutcha Dev Panel</h2>
                    <nav class="flex gap-1 overflow-x-auto whitespace-nowrap">
                        <button data-tab="elements" class="dev-tab active-tab">Elements</button>
                        <button data-tab="console" class="dev-tab">Console</button>
                        <button data-tab="storage" class="dev-tab">Storage</button>
                        <button data-tab="network" class="dev-tab">Network</button>
                        <button data-tab="recursos" class="dev-tab">Recursos</button>
                        <button data-tab="acessibilidade" class="dev-tab">Acessibilidade</button>
                        <button data-tab="testes" class="dev-tab">Testes</button>
                        <button data-tab="info" class="dev-tab">Info</button>
                    </nav>
                </div>
                <button id="close-dev-panel" class="p-2 rounded-full hover:bg-gray-700">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div id="dev-panel-content" class="flex-1 overflow-auto flex"></div>
            <div id="console-input-container" class="hidden items-center p-2 border-t border-gray-700">
                <span class="material-symbols-outlined text-sky-400">chevron_right</span>
                <input type="text" id="console-input" class="flex-1 bg-transparent border-none focus:outline-none ml-2" placeholder="Executar JavaScript...">
            </div>
        </div>
    `,o=document.createElement("div");o.innerHTML=t,document.body.appendChild(o);const n=document.getElementById("dev-tools-trigger"),s=document.getElementById("dev-panel"),l=document.getElementById("close-dev-panel"),a=document.getElementById("dev-panel-content"),d=document.getElementById("console-input-container"),c=document.querySelectorAll(".dev-tab");let r,i,p,u=document.getElementById("dev-tools-trigger"),h=document.getElementById("dev-panel"),m=document.getElementById("close-dev-panel"),y=document.getElementById("dev-panel-content"),g=document.getElementById("console-input-container"),v=document.querySelectorAll(".dev-tab"),f=!1,w=null,E=null,b=new WeakMap;function L(e){y.innerHTML="",g.style.display="console"===e?"flex":"none",f&&S(),function(e){switch(e){case"elements":T();break;case"console":k();break;case"storage":N();break;case"network":A();break;case"recursos":C();break;case"acessibilidade":F();break;case"testes":x();break;case"info":M();break;default:y.innerHTML=`<div class="p-4">Aba não encontrada: ${e}</div>`}}(e)}function T(){y.innerHTML=`
            <div id="elements-tree-container" class="w-1/2 overflow-auto p-2 border-r border-gray-700"></div>
            <div id="styles-container" class="w-1/2 overflow-auto p-2">
                <div class="flex items-center gap-2 mb-2">
                    <button id="inspector-toggle" class="p-1 rounded hover:bg-gray-700" title="Inspecionar um elemento na página">
                        <span class="material-symbols-outlined">ads_click</span>
                    </button>
                    <h3 class="font-bold">Computed Styles</h3>
                </div>
                <div id="computed-styles-container">Clique em um elemento para ver os estilos.</div>
            </div>`;const e=document.getElementById("elements-tree-container");e&&e.appendChild(I(document.documentElement));const t=document.getElementById("inspector-toggle");t&&t.addEventListener("click",S)}function k(){y.innerHTML='<div id="console-output" class="flex-1 overflow-y-auto p-2"></div>';const e=document.getElementById("console-input");e&&e.addEventListener("keydown",t=>{if("Enter"===t.key&&e.value){const o=e.value;e.value="",P({type:"log",args:[`> ${o}`]});try{const n=new Function(`return ${o}`)();P({type:"info",args:[n]})}catch(s){P({type:"error",args:[s.toString()]})}})}function N(){let e="";for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t),n=localStorage.getItem(o);e+=`<tr class='border-b border-gray-800'><td class='p-2 align-top text-orange-400'>${o}</td><td class='p-2 align-top text-green-400 whitespace-pre-wrap break-all'>${n}</td></tr>`}y.innerHTML=`<div class="p-2 w-full"><h3 class="font-bold text-lg mb-2">Local Storage</h3><table class="w-full text-left text-xs"><thead><tr class="border-b border-gray-700"><th class="p-2 w-1/4">Key</th><th class="p-2">Value</th></tr></thead><tbody>${e}</tbody></table></div>`}function A(){const e=performance.getEntriesByType("navigation")[0];if(!e)return void(y.innerHTML='<div class="p-4">Informação de Network não disponível.</div>');y.innerHTML=`<div class="p-4 w-full"><table class='w-full text-left'><tbody><tr class='border-b border-gray-800'><td class='p-2 font-bold'>Tempo Total de Carregamento</td><td class='p-2'>${e.duration.toFixed(0)} ms</td></tr><tr class='border-b border-gray-800'><td class='p-2'>Lookup de DNS</td><td class='p-2'>${(e.domainLookupEnd-e.domainLookupStart).toFixed(0)} ms</td></tr><tr class='border-b border-gray-800'><td class='p-2'>Conexão TCP</td><td class='p-2'>${(e.connectEnd-e.connectStart).toFixed(0)} ms</td></tr><tr class='border-b border-gray-800'><td class='p-2'>Tempo até Primeiro Byte (TTFB)</td><td class='p-2'>${(e.responseStart-e.requestStart).toFixed(0)} ms</td></tr><tr class='border-b border-gray-800'><td class='p-2'>Download do Conteúdo</td><td class='p-2'>${(e.responseEnd-e.responseStart).toFixed(0)} ms</td></tr></tbody></table></div>`}function C(){const e=performance.getEntriesByType("resource");let t="";e.forEach(e=>{t+=`<tr class='border-b border-gray-800'><td class='p-2 truncate max-w-xs'>${e.name.split("/").pop()}</td><td class='p-2'>${e.initiatorType}</td><td class='p-2'>${(e.transferSize/1024).toFixed(2)}</td><td class='p-2'>${e.duration.toFixed(0)}</td></tr>`}),y.innerHTML=`<div class="p-4 w-full"><table class='w-full text-left'><thead><tr class='border-b border-gray-700'><th class='p-2'>Nome</th><th class='p-2'>Tipo</th><th class='p-2'>Tamanho (KB)</th><th class='p-2'>Tempo (ms)</th></tr></thead><tbody>${t}</tbody></table></div>`}function F(){y.innerHTML='<div class="p-4"><button id="run-axe" class="dev-button">Rodar Análise de Acessibilidade</button><div id="axe-results" class="mt-4"></div></div>';const e=document.getElementById("run-axe");e&&e.addEventListener("click",D)}function x(){y.innerHTML='<div class="p-4 w-full"><button id="run-diagnostics" class="dev-button">Rodar Diagnóstico Avançado</button><div id="test-results" class="mt-4"></div></div>';const e=document.getElementById("run-diagnostics");e&&e.addEventListener("click",B)}function M(){y.innerHTML=`<div class="p-4 w-full"><table class='w-full text-left'><tbody><tr class='border-b border-gray-800'><td class='p-2 font-bold'>User Agent</td><td class='p-2'>${navigator.userAgent}</td></tr><tr class='border-b border-gray-800'><td class='p-2 font-bold'>Viewport</td><td class='p-2'>${window.innerWidth}px x ${window.innerHeight}px</td></tr><tr class='border-b border-gray-800'><td class='p-2 font-bold'>Plataforma</td><td class='p-2'>${navigator.platform}</td></tr><tr class='border-b border-gray-800'><td class='p-2 font-bold'>Linguagem</td><td class='p-2'>${navigator.language}</td></tr></tbody></table></div>`}function P(e){const t=document.getElementById("console-output");if(!t)return;let o="text-white";"error"===e.type?o="text-red-400":"warn"===e.type?o="text-yellow-400":"info"===e.type&&(o="text-sky-400");const n=document.createElement("div");n.className=`console-log-item py-1 px-2 border-b border-gray-800 flex gap-2 ${o}`,n.innerHTML=`<span class="opacity-50">${(new Date).toLocaleTimeString()}</span><div class="flex-1">${e.args.map(e=>"string"==typeof e?e:JSON.stringify(e,null,2)).join(" ")}</div>`,t.appendChild(n),t.scrollTop=t.scrollHeight}function I(e){const t=document.createElement("div");function o(e,n){if(!e.tagName)return null;const s=document.createElement("div"),l=document.createElement("div");l.className="element-node-header flex items-center cursor-pointer hover:bg-gray-800 rounded p-0.5",l.style.paddingLeft=`${n}rem`,b.set(e,l);const a=Array.from(e.attributes).map(t=>`<span class="text-orange-400">${t.name}</span><span class="text-gray-500">="</span><span class="text-green-400">${t.value}</span><span class="text-gray-500">"</span>`).join(" "),d=e.children.length>0,c=d?"<span class=\"material-symbols-outlined text-sm expand-icon\">arrow_right</span>":"<span class='w-4 inline-block'></span>";l.innerHTML=`${c}<span class='text-gray-500'>&lt;</span><span class='text-pink-400'>${e.tagName.toLowerCase()}</span> <span class="attributes">${a}</span><span class='text-gray-500'>&gt;</span>`;const r=document.createElement("div");return r.className="element-children hidden",s.appendChild(l),s.appendChild(r),l.addEventListener("click",t=>{t.stopPropagation(),r.classList.toggle("hidden");const o=l.querySelector(".expand-icon");o&&(o.textContent=r.classList.contains("hidden")?"arrow_right":"arrow_drop_down"),j(e)}),d&&[...e.children].forEach(e=>{const t=o(e,n+1);t&&r.appendChild(t)}),s}const n=o(e,0);return n&&t.appendChild(n),t}function j(e){q(e),z(e),O(e)}function O(e){const t=document.getElementById("computed-styles-container");if(!t||!e)return void(t&&(t.innerHTML="Selecione um elemento para ver os estilos."));const o=window.getComputedStyle(e),n=[...o].filter(e=>!e.startsWith("-")).sort();let s="<table class='w-full text-left text-xs'>";n.forEach(e=>{s+=`<tr class='border-b border-gray-800'><td class='p-1 text-pink-400'>${e}</td><td class='p-1 text-cyan-400'>${o.getPropertyValue(e)}</td></tr>`}),s+="</table>",t.innerHTML=s}function q(e){w&&(w.style.outline=""),e.style.outline="2px solid #0ea5e9",w=e}function z(e){E&&(E.style.backgroundColor="");const t=b.get(e);t&&(t.style.backgroundColor="rgba(14, 165, 233, 0.3)",E=t)}function V(e){let t=e;for(;t;){const o=b.get(t);if(o){const n=o.parentElement.querySelector(".element-children");if(n){n.classList.remove("hidden");const s=o.querySelector(".expand-icon");s&&(s.textContent="arrow_drop_down")}}}t=t.parentElement}const H=b.get(e);H&&H.scrollIntoView({behavior:"smooth",block:"center"})}function S(){f=!f;const e=document.getElementById("inspector-toggle");e&&(e.style.backgroundColor=f?"#0ea5e9":"transparent",e.style.color=f?"white":"#9ca3af"),document.body.style.cursor=f?"crosshair":"default",f?(document.addEventListener("mouseover",q),document.addEventListener("click",G,{capture:!0})):(document.removeEventListener("mouseover",q),document.removeEventListener("click",G,{capture:!0}))}function G(e){if(!f||e.target.closest("#dev-panel"))return;e.preventDefault(),e.stopPropagation();const t=e.target;j(t),V(t),f=!1;const o=document.getElementById("inspector-toggle");o&&(o.style.backgroundColor="transparent",o.style.color="#9ca3af"),document.body.style.cursor="default",document.removeEventListener("mouseover",q),document.removeEventListener("click",G,{capture:!0})}async function D(){const t=document.getElementById("axe-results");if(!t)return;t.innerHTML="Analisando...";try{const o=await axe.run({exclude:[["#dev-panel"]]});t.innerHTML="";const{violations:n,incomplete:s,passes:l}=o;if(t.insertAdjacentHTML("beforeend",`<h3 class="text-xl font-bold">Resultados (${n.length} violações, ${s.length} revisões, ${l.length} passaram)</h3>`),n.length>0&&(t.insertAdjacentHTML("beforeend",'<h4 class="text-lg font-bold text-red-400 mt-4 mb-2">Violações Críticas/Sérias</h4>'),n.forEach(e=>t.insertAdjacentHTML("beforeend",`<div class="p-2 my-1 rounded-md bg-red-900 border border-red-700"><p class="font-bold">${e.help} (${e.impact})</p><p class="text-gray-400">${e.description}</p><a href="${e.helpUrl}" target="_blank" class="text-sky-400 hover:underline">Saiba mais</a></div>`))),s.length>0&&(t.insertAdjacentHTML("beforeend",'<h4 class="text-lg font-bold text-yellow-400 mt-4 mb-2">Itens para Revisão Manual</h4>'),s.forEach(e=>t.insertAdjacentHTML("beforeend",`<div class="p-2 my-1 rounded-md bg-yellow-900 border border-yellow-700"><p class="font-bold">${e.help} (${e.impact})</p><p class="text-gray-400">${e.description}</p><a href="${e.helpUrl}" target="_blank" class="text-sky-400 hover:underline">Saiba mais</a></div>`))),l.length>0&&(t.insertAdjacentHTML("beforeend",`<h4 class="text-lg font-bold text-green-400 mt-4 mb-2">Testes Aprovados (${l.length})</h4>`),l.forEach(e=>t.insertAdjacentHTML("beforeend",`<div class="p-2 my-1 rounded-md bg-green-900 border border-green-700"><p class="font-bold">${e.help}</p></div>`))),0===n.length&&0===s.length&&t.insertAdjacentHTML("beforeend",'<p class="text-green-400 font-bold text-center mt-4">Parabéns! Nenhum problema de acessibilidade encontrado.</p>')}catch(a){t.innerHTML=`<p class="text-red-500">${a.message}</p>`}}async function B(){const e=document.getElementById("test-results");if(!e)return;e.innerHTML=`
            <div class="p-2 text-sky-300 bg-sky-900/50 border border-sky-700 rounded-md mb-4">
                <p class="font-bold">Nota do Desenvolvedor:</p>
                <p class="text-xs text-sky-400">Estes testes são baseados em heurísticas e melhores práticas. Um "FAIL" não é necessariamente um erro crítico, mas uma anomalia que merece atenção. Use as sugestões como um guia para melhorar a qualidade do projeto.</p>
            </div>
            <table class="w-full text-left text-xs">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="p-2 w-1/4">Teste de Diagnóstico</th>
                        <th class="p-2 w-1/6">Resultado</th>
                        <th class="p-2">Detalhes e Sugestões</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>`;const t=e.querySelector("tbody"),o=(e,o,n,s)=>{const l="PASS"===o,a=l?"text-green-400":"FAIL"===o?"text-red-400":"text-yellow-400",d=l?"check_circle":"FAIL"===o?"error":"warning",c=`
                <tr class="border-b border-gray-800">
                    <td class="p-2 align-top">${e}</td>
                    <td class="p-2 align-top font-bold ${a}"><span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">${d}</span> ${o}</span></td>
                    <td class="p-2 align-top text-gray-400">
                        <p>${n}</p>
                        ${s?`<p class="mt-1 text-sky-400 text-xs"><span class="font-bold">Sugestão:</span> ${s}</p>`:""}
                    </td>
                </tr>`;t.insertAdjacentHTML("beforeend",c)},n={search:{ids:["search-input","results-container","results-count"],path:"/search.html"},status:{ids:["status-container","uptime-history-container","performance-monitor-container"],path:"/status.html"},home:{ids:[".main-search-form"],path:"/index.html"},artigo:{ids:["#toc-container",".flex-1.overflow-y-auto"],path:"/algoritmos.html"}},s=window.location.pathname.split("/").pop()||"index.html",l=Object.values(n).find(e=>e.path.includes(s));l&&l.ids.forEach(e=>{const t=!!document.querySelector(e);o(`Verificação de Elemento: ${e}`,t?"PASS":"FAIL",t?`Elemento essencial "${e}" encontrado.`:`Elemento crítico "${e}" não foi encontrado nesta página.`,t?null:`Verifique o HTML da página e garanta que o elemento com seletor "${e}" existe e não foi removido ou teve seu ID/classe alterado.`)})};try{const a=await fetch("search.json?cache_bust="+Date.now());if(a.ok){const d=await a.json();d.length>0&&d[0].title&&d[0].url?o("Validação de `search.json`","PASS","Arquivo encontrado, JSON é válido e contém dados.","N/A"):o("Validação de `search.json`","FALHA","JSON é válido, mas está vazio ou a estrutura está incorreta.","Verifique o processo de build (Jekyll) para garantir que os dados dos posts estão sendo exportados corretamente para `search.json`.")}else o("Validação de `search.json`","FALHA",`Arquivo não encontrado (Status: ${a.status}). A busca não funcionará.`,"Execute o build do Jekyll ou verifique se o arquivo foi movido ou renomeado.")}catch(c){o("Validação de `search.json`","FALHA","O conteúdo do arquivo não é um JSON válido.","Inspecione o arquivo `search.json` para encontrar e corrigir erros de sintaxe.")}try{const r=await fetch("uptime-data.json?cache_bust="+Date.now());if(r.ok){const i=await r.json();i.monitors&&i.metrics?o("Validação de `uptime-data.json`","PASS","Arquivo encontrado, JSON é válido e contém as chaves esperadas.","N/A"):o("Validação de `uptime-data.json`","FALHA","JSON é válido, mas não contém as chaves 'monitors' ou 'metrics'.","Verifique o workflow `uptime.yml` do GitHub Actions para garantir que ele está gerando e combinando os dados corretamente.")}else o("Validação de `uptime-data.json`","FALHA",`Arquivo não encontrado (Status: ${r.status}). A página de status não funcionará.`,"Verifique se o workflow `uptime.yml` está rodando corretamente e salvando o arquivo no local esperado.")}catch(p){o("Validação de `uptime-data.json`","FALHA","O conteúdo do arquivo não é um JSON válido.","Inspecione `uptime-data.json`. Provavelmente houve um erro na execução do workflow `uptime.yml` que corrompeu o arquivo.")}document.querySelectorAll("script[src]:not([src^='https'])").forEach(e=>{const t=e.hasAttribute("defer")||e.hasAttribute("async");o(`Performance do Script: ${e.src.split("/").pop()}`,t?"PASS":"RECOMENDAÇÃO",t?`O script é carregado de forma assíncrona.`:`O script pode estar bloqueando a renderização da página.`,t?null:`Adicione o atributo 'defer' à tag <script> para melhorar a performance de carregamento.`)});const d={title:!!document.querySelector("title"),description:!!document.querySelector('meta[name="description"]')};o("SEO: Título da Página",d.title?"PASS":"FALHA",d.title?"A tag `<title>` está presente.":"A tag `<title>` é essencial para SEO e acessibilidade e não foi encontrada.",d.title?null:"Adicione uma tag `<title>` única e descritiva dentro da seção `<head>` do HTML."),o("SEO: Meta Descrição",d.description?"PASS":"RECOMENDAÇÃO",d.description?"A tag `<meta name=\"description\">` está presente.":"A página não possui uma meta descrição, o que pode impactar como ela aparece nos resultados de busca.",d.description?null:"Adicione `<meta name=\"description\" content=\"Uma descrição concisa da página.\">` dentro da seção `<head>`.");const u=document.querySelectorAll('a[href=""], a[href="#"], a:not([href])');u.length>0?(o("Qualidade: Links Quebrados/Vazios",u.length>0?"FALHA":"PASS",`${u.length} link(s) com destino vazio ou inválido foram encontrados.`,"Inspecione os links destacados e adicione um `href` válido ou remova a tag `<a>` se não for um link."),[...u].forEach(e=>{const t=e.cloneNode(!0);t.style.cssText="color: red; border: 1px solid red;",e.replaceWith(t)})):o("Qualidade: Links Quebrados/Vazios","PASS","Nenhum link com destino vazio ou inválido encontrado.","N/A");const h=document.querySelectorAll("img:not([alt])");h.length>0?o("Acessibilidade: Imagens sem `alt`",h.length>0?"FALHA":"PASS",`${h.length} imagem(ns) sem o atributo 'alt'.`,"Toda imagem deve ter um atributo `alt`. Se for decorativa, use `alt=\"\"`. Caso contrário, forneça uma descrição concisa do conteúdo da imagem."):o("Acessibilidade: Imagens sem `alt`","PASS","Todas as imagens possuem o atributo `alt`.","N/A")}n.addEventListener("click",()=>{h.classList.toggle("hidden"),h.classList.contains("hidden")||L("elements")}),m.addEventListener("click",()=>h.classList.add("hidden")),v.forEach(e=>{e.addEventListener("click",()=>{v.forEach(e=>e.classList.remove("active-tab")),e.classList.add("active-tab"),L(e.dataset.tab)})}),["log","warn","error","info"].forEach(e=>{const t=console[e];console[e]=(...o)=>{t.apply(console,o),P({type:e,args:o})}}),window.onerror=(e,t,o)=>{P({type:"error",args:[`Erro: ${e} em ${t}:${o}`]})});
