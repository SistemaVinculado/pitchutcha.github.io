document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("search-input"),t=document.getElementById("results-container"),c=document.getElementById("results-count"),n=document.querySelectorAll('input[data-filter="category"]');let o=[];async function a(){try{const r=await fetch("search.json");if(!r.ok)throw new Error("Falha ao carregar search.json");o=await r.json();const l=new URLSearchParams(window.location.search).get("q");l&&(e.value=l),s()}catch(r){console.error(r),c.textContent="Erro ao carregar artigos."}}function i(o,a){if(t.innerHTML="",0===o.length)return void(c.textContent="Nenhum resultado encontrado.");c.textContent=`Mostrando ${o.length} resultados.`;o.forEach(c=>{let n=c.title,o=c.excerpt;if(a){const e=new RegExp(a,"gi");n=n.replace(e,e=>`<mark>${e}</mark>`),o=o.replace(e,e=>`<mark>${e}</mark>`)}const s=document.createElement("div");s.className="bg-white p-6 rounded-md shadow-sm border border-gray-200 hover:shadow-md transition-shadow",s.innerHTML=`
                <a class="block" href="${c.url}">
                    <h3 class="text-lg font-semibold text-gray-900 hover:text-[var(--primary-color)]">${n}</h3>
                    <p class="text-sm text-gray-500 mt-1">Categoria: <span class="font-medium text-gray-700">${c.category}</span></p>
                    <p class="text-gray-600 mt-2 text-sm">${o}</p>
                </a>
            `,t.appendChild(s)})}function s(){const t=e.value.toLowerCase().trim(),c=Array.from(n).filter(e=>e.checked).map(e=>e.value.trim());const a=o.filter(e=>{const n=t?e.title.toLowerCase().includes(t)||e.excerpt.toLowerCase().includes(t):!0,o=c.length===0||(e.category?c.includes(e.category.trim()):!1);return n&&o});i(a,t)}e&&(e.addEventListener("input",s),n.forEach(e=>{e.addEventListener("change",s)}),a())});
