document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("latency-chart-svg"),t=document.getElementById("inference-chart-container"),n=document.getElementById("chart-avg-latency"),o=document.getElementById("chart-avg-inference");if(e&&t){const a=a=>{if(a.graphs&&a.graphs.latency_history&&a.graphs.inference_by_model){(()=>{const t=a.graphs.latency_history;if(t&&t.length>0){const a=t.reduce((e,t)=>e+t,0)/t.length;n&&(n.textContent=`Média: ${a.toFixed(0)}ms`);let o=`M 0,${150-t[0]}`;for(let n=0;n<t.length-1;n++){const a=n*472/(t.length-1),s=150-e[n],r=(n+1)*472/(t.length-1),c=150-e[n+1],l=(a+r)/2;o+=` Q ${a},${s} ${l},${(s+c)/2}`}const s=document.createElementNS("http://www.w3.org/2000/svg","path"),r=document.createElementNS("http://www.w3.org/2000/svg","path"),c=`${o} V 150 H 0 Z`;s.setAttribute("d",o),s.setAttribute("stroke","#4a90e2"),s.setAttribute("stroke-width","2"),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),r.setAttribute("d",c),r.setAttribute("fill","url(#paint0_linear_area)"),e.innerHTML="",e.appendChild(r),e.appendChild(s)}else n&&(n.textContent="Média: --ms"),e.innerHTML='<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#9CA3AF" font-size="14">Sem dados disponíveis</text>'})(),(()=>{const e=a.graphs.inference_by_model;if(e&&e.length>0){const n=e.reduce((e,t)=>e+t.time,0),a=n/e.length;o&&(o.textContent=`Média: ${a.toFixed(0)}ms`),t.innerHTML="";const s=Math.max(...e.map(e=>e.time),1);e.forEach(e=>{const n=e.time/s*100,o=`
              <div class="flex flex-col items-center gap-2">
                  <div class="w-full bg-[#30363d] rounded-t-sm" style="height: 100%;">
                      <div class="h-full w-full bg-[#4a90e2] rounded-t-sm" style="height: ${n}%;"></div>
                  </div>
                  <p class="text-gray-400 text-xs text-center">${e.model}</p>
              </div>
            `;t.insertAdjacentHTML("beforeend",o)})}else o&&(o.textContent="Média: --ms"),t.innerHTML='<p class="text-gray-400 text-center col-span-5">Sem dados disponíveis</p>'})()}else console.error("Dados do gráfico não encontrados no arquivo JSON.")};fetch("uptime-data.json?cache_bust="+Date.now()).then(e=>{if(!e.ok)return Promise.reject("Falha ao carregar dados de uptime.");return e.json()}).then(e=>a(e)).catch(e=>console.error("Erro ao renderizar gráficos:",e))}});
