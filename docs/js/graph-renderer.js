document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector('meta[name="base-url"]')?.content||"",t=document.getElementById("latency-chart-svg"),o=document.getElementById("inference-chart-container"),n=document.getElementById("chart-avg-latency"),r=document.getElementById("chart-avg-inference");if(t&&o){const s=s=>{if(!s.graphs||!s.graphs.latency_history||!s.graphs.inference_by_model)return void console.error("Dados do gráfico não encontrados no arquivo JSON.");(s=>{const a=s;if(s&&s.length>0){const i=s.reduce((e,t)=>e+t,0)/s.length;n&&(n.textContent=`Média: ${i.toFixed(0)}ms`);let c=`M 0,${150-s[0]}`;for(let e=0;e<s.length-1;e++){const t=e*472/(s.length-1),o=150-a[e],n=(e+1)*472/(s.length-1),r=150-a[e+1],l=(t+n)/2;c+=` Q ${t},${o} ${l},${(o+r)/2}`}const l=document.createElementNS("http://www.w3.org/2000/svg","path"),d=document.createElementNS("http://www.w3.org/2000/svg","path"),h=`${c} V 150 H 0 Z`;l.setAttribute("d",c),l.setAttribute("stroke","#4a90e2"),l.setAttribute("stroke-width","2"),l.setAttribute("fill","none"),l.setAttribute("stroke-linecap","round"),d.setAttribute("d",h),d.setAttribute("fill","url(#paint0_linear_area)"),t.querySelectorAll("path").forEach(e=>e.remove()),t.appendChild(d),t.appendChild(l)}else n&&(n.textContent="Média: --ms"),t.innerHTML='<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#9CA3AF" font-size="14">Sem dados disponíveis</text>'})(s.graphs.latency_history),(n=>{const s=o;if(n&&n.length>0){const a=n.reduce((e,t)=>e+t.time,0),i=a/n.length;r&&(r.textContent=`Média: ${i.toFixed(0)}ms`),s.innerHTML="";const c=Math.max(...n.map(e=>e.time),1);n.forEach(e=>{const t=e.time/c*100,o=`
              <div class="flex flex-col items-center gap-2">
                  <div class="w-full bg-[#30363d] rounded-t-sm" style="height: 100%;">
                      <div class="h-full w-full bg-[#4a90e2] rounded-t-sm" style="height: ${t}%;"></div>
                  </div>
                  <p class="text-gray-400 text-xs text-center">${e.model}</p>
              </div>
            `;s.insertAdjacentHTML("beforeend",o)})}else r&&(r.textContent="Média: --ms"),s.innerHTML='<p class="text-gray-400 text-center col-span-5">Sem dados disponíveis</p>'})(s.graphs.inference_by_model)};fetch(`${e}uptime-data.json?cache_bust=`+Date.now()).then(e=>e.ok?e.json():Promise.reject("Falha ao carregar dados de uptime.")).then(e=>s(e)).catch(e=>console.error("Erro ao renderizar gráficos:",e))}});
