!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Fuse=t()}(this,function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){"undefined"!=typeof t[e]&&t[e];var n=r[e];e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var n={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score-t.score},includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){for(var n=t.split("."),r=e,i=0;i<n.length;i+=1)r=r[n[i]];return r},ignoreLocation:!1};function r(e,t){for(var i=[],o=0,s=e.length;o<s;o+=1)i.push(t(e[o],o));return i}function i(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function o(e){return"string"==typeof e}function s(e){return"number"==typeof e}function a(e){var t=void 0;return"object"===c(e)?t=e:o(e)&&(t=JSON.parse(e)),t}function c(e){return null===e?"null":typeof e}function h(e,t){return void 0===t&&(t=[]),[].concat.apply([],r(e,function(e){return e[t]||[]}))}var u=/^\./,l=/^\$\./;function f(e,t){for(var n=t.split("."),r=e,i=0;i<n.length;i+=1){var o=n[i];u.test(o)?r=r[o.slice(1)]:l.test(o)?r=r[o.slice(2)]:(console.error("Token ".concat(o," is not supported")),r=null)}return r}function d(e,t,n){if(i(e))for(var s=0,a=e.length;s<a;s+=1)d(e[s],t,n);else{var c=t.get(e);if(void 0!==c&&null!==c)if(i(c))for(var h=0,u=c.length;h<u;h+=1)n.push(c[h]);else n.push(c)}}var g=function(){function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.getFn,a=void 0===s?n.getFn:s;this.list=r,this.options=t({},n,{},i),this.options.keys&&!this.options.keys.length&&console.error("[Fuse] Empty `keys` array. Keys are required."),this.getFn=a}return e.prototype.setCollection=function(e){return this.list=e,this},e.prototype.search=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};if(this._log('---------\nSearch pattern: "'.concat(e,'"')),!e)return[];var i=this.options,s=i.isCaseSensitive,a=i.includeScore,c=i.includeMatches,h=i.findAllMatches,u=i.minMatchCharLength,l=i.shouldSort,f=i.sortFn,d=i.useExtendedSearch,g=i.ignoreLocation;if(s||(e=e.toLowerCase()),e.length>32)return console.error("[Fuse] Pattern length exceeds max of 32 characters"),[];var p=this.list,y=p.length,v=this.getFn,m=this.options.keys.slice(),b=-1,C=[],E=!1;if(d)r(this.options.keys,function(t,n){var r=m[n];if(o(r)){var i=r.indexOf("!");-1!==i&&(E=!0,m[n]=r.slice(0,i))}var s=r.indexOf("=");-1!==s&&(m[n]=r.slice(0,s));var a=r.indexOf("^");-1!==a&&(m[n]=r.slice(0,a))});var L=function(t){var n=t.indexOf("=");return-1!==n?t.slice(0,n):t},S=function(t){var n=t.indexOf("=");return-1!==n?+t.slice(n+1):1},w=function(t){var n=t.indexOf("^");return-1!==n?{isDuo:!0,key:t.slice(0,n),weight:t.slice(n+1)}:{isDuo:!1,key:t}};r(this.options.keys,function(e,t){var n=w(e),r=n.isDuo,i=n.key,o=n.weight;if(r){var s=S(o),a=L(o);m[t]={key:i,weight:s,duo:a}}else m[t]={key:e,weight:S(e)}});var M=function(t){var n=t.indexOf("!");return-1!==n};if(E){for(var O,T=function(){var n=m[b],r=n.key,i=n.weight,o=n.duo,s=p[b];if(void 0===s||null===s)return"continue";var a=M(o||r),c=S(o||r),u=[];if(d){if(a)return"continue";u.push(s)}else d(s,{name:r,get:v},u);if(u.length){for(var f=0,g=u.length;f<g;f+=1){var y=u[f],C=void 0,L=void 0,w=void 0;if(void 0!==y&&null!==y){if(o&&void 0!==(w=o?S(o):c)&&null!==w)L=w;else if(void 0!==(w=c)&&null!==w)L=w;else{var T=S(r);L=void 0!==T&&null!==T?T:1}if(i)L=i;if(s)L=c;C=this._analyze({key:r,value:y,record:s,index:b,mult:L}),C&&C.length&&C.forEach(function(e){C.push(e)})}if(C.length){E=M(o||r);var _=void 0;d&&E&&(_={}),C.forEach(function(n){var i=t({},n);if(o){var s=n.key.indexOf(".");-1!==s?i.key=r+"."+o+n.key.slice(s):i.key=r+"."+o}if(E){var a=i.key.indexOf("=");i.key=i.key.slice(0,a),_[i.key]=i.score}C.push(i)}),d&&E&&(O=O||{},O[b]=_)}}}},_=/['|"]/g,k=0;k<y;k+=1)b=k,T.call(this);return E?this._exactSearch(e,O):this._search(e,C,g,h,u,c,a,l,f,n.limit)};var F,P=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")};function A(e,t,n){var r=e[t];return void 0===r||null===r?n:r}function x(e){for(var t=[],n=0,r=e.length;n<r;n+=1){var s=e.charCodeAt(n);s>=55296&&s<=56319&&n<r-1&&e.charCodeAt(n+1)>=56320&&(t.push(e.slice(n,n+2)),n+=1)}return t}return F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.errors,s=void 0===i?0:i,a=r.currentLocation,c=void 0===a?0:a,h=r.expectedLocation,u=void 0===h?0:h,l=r.distance,f=void 0===l?n.distance:l,d=s/e.length,g=Math.abs(u-c);return f?d+(g/f):g?1:d},e.prototype._log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.verbose&&console.log(t)},e.prototype._analyze=function(e){var t=e.key,n=e.value,r=e.record,i=e.index,s=e.mult;if(o(n)){var a=[],c=n.toLowerCase(),h={};return this._log("   --- Searching in value: ".concat(n)),r.forEach(function(e){var n=e.k,r=e.l,o=e.v;if(void 0!==o){var i=void 0;if(a)i=a.search(o,n);else{if(!h[n]){var s=n.length,c=new Array(s),u={};for(var l=0;l<s;l+=1){var f=n.charCodeAt(l);c[l]=f,u[f]=(u[f]||0)|1<<l}h[n]=u}i=this.search(o,n)}i&&(a||(a=[]),a.push.apply(a,i))}}.bind(this)),a.length?{isMatch:!0,score:a[0].score,key:t,value:n,indices:a[0].indices,mult:s}:void 0}var u=[],l={};return this._log("   --- Searching in value: ".concat(n)),d(n,{name:t,get:this.getFn},u),u.length?r(u,function(e){if(void 0!==e&&null!==e){var n=e.toLowerCase(),r={};return d(a(e),{name:t,get:function(t){for(var n=t.split("."),i=e,s=0;s<n.length;s+=1)i=i[n[s]];return i}},Object.keys(r)),{key:t,value:e,record:r,score:Object.keys(r).reduce(function(e,t){return e+(r[t].score*r[t].mult)},0)/Object.keys(r).length||1,mult:s}}}).filter(function(e){return e}):void 0},e.prototype._search=function(e,t,n,r,i,o,s,a,c,h){var u,l,f,g=r?t:h(t);if(r)for(var p=0,y=t.length;p<y;p+=1){var v=t[p],m=v.key,b=v.value,C=v.record,L=v.index,S=v.mult;if(void 0!==b&&null!==b){var w=this.search(e,b);w&&(u=w.score,l=w.indices,v.score=u,v.indices=l)}}if(a&&(g=c(g)),h&&h<g.length){var M=new Array(h);for(p=0;p<h;p+=1)M[p]=g[p];g=M}for(var O=new Array(g.length),T=0,P=g.length;T<P;T+=1){var A=g[T],x=void 0,F=void 0;if(o)x=this.options.includeScore?{score:A.score,value:A.record}:A.record;else if(s){for(var I in x=t({},A.record),A.matches)x[I]=A.matches[I];x.score=A.score}else x=A.record;O[T]=x}return O},e.prototype._exactSearch=function(e,t){for(var n=[],i=Object.keys(t),o=0,s=i.length;o<s;o+=1)for(var a=i[o],c=Object.keys(t[a]),h=0,u=c.length;h<u;h+=1){var l=c[h],f=t[a][l];n.push({key:l,record:this.list[a],score:f})}return n.sort(this.options.sortFn),this.options.limit&&n.length>this.options.limit&&(n=n.slice(0,this.options.limit)),this._format(n)},e.prototype._format=function(e){var t=[];if(this.options.includeMatches){for(var n=0,i=e.length;n<i;n+=1){var o=e[n],s=o.output;if(s&&s.length)for(var a=0,c=s.length;a<c;a+=1){var h=s[a],u=h.key,l=h.value;o.matches||(o.matches=[]),o.matches.push({key:u,value:l,indices:h.indices})}}for(var f=[],d=0,g=e.length;d<g;d+=1){var p=e[d];p.matches&&p.matches.length&&f.push(p)}e=f}if(this.options.includeScore){for(var y=0,v=e.length;y<v;y+=1){var m=e[y];t.push({record:m.record,score:m.score,matches:m.matches})}return t}for(var b=0,C=e.length;b<C;b+=1)t.push(e[b].record);return t},e.createIndex=function(e,n){var s,a,c,h,u,l={};if(i(n[0]))for(var f=0;f<n.length;f+=1)s=n[f],a=s.name,c=s.get,h=i(c)?c:[c],u=void 0,l[a]||(l[a]={}),r(h,function(n){for(var r=d([],{name:a,get:n},e),i=0;i<r.length;i+=1)u=r[i],o(u)&&(u=u.toLowerCase(),l[a][u]||(l[a][u]={}),l[a][u].titleRefs?l[a][u].titleRefs.push(i):l[a][u].titleRefs=[i])});else{var g=n.name,p=n.get,y=i(p)?p:[p];r(y,function(n){for(var r=d([],{name:g,get:n},e),i=0;i<r.length;i+=1)u=r[i],o(u)&&(u=u.toLowerCase(),l[g]||(l[g]={}),l[g][u]||(l[g][u]={}),l[g][u].titleRefs?l[g][u].titleRefs.push(i):l[g][u].titleRefs=[i])})}return new v(l)},e}(function(){function e(t,n,r){var i=n.location,o=void 0===i?0:i,s=n.distance,a=void 0===s?100:s,c=n.threshold,h=void 0===c?.6:c,u=n.findAllMatches,l=void 0!==u&&u,f=n.minMatchCharLength,d=void 0===f?1:f;this.options={location:o,distance:a,threshold:h,findAllMatches:l,minMatchCharLength:d,isCaseSensitive:n.isCaseSensitive||!1,ignoreLocation:n.ignoreLocation||!1},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length>32&&(this.pattern=this.pattern.slice(0,32))}return e.prototype.search=function(e){if(!this.options.isCaseSensitive&&(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,indices:[[0,e.length-1]]};var t=this.options,n=t.location,r=t.distance,i=t.threshold,o=t.findAllMatches,s=t.minMatchCharLength,a=t.ignoreLocation;if(this.pattern.length>32)return console.error("Pattern length exceeds max of 32 characters"),{isMatch:!1,score:1,indices:[]};for(var c=this.pattern.length,h=e.length,u=this.pattern.indexOf(e.charAt(n)),l=this.pattern.length/e.length,f=[],d=0,g=0;g<c;g+=1)f[g]=0;if(-1!==u){var p=.999,y=F(this.pattern,{errors:0,currentLocation:n,expectedLocation:u,distance:r});if(y<i)return{isMatch:!0,score:y,indices:[[u,u+h-1]]}}u=-1;for(var v,m=[],b=1,C=c+h,E=1<<c-1,L=0;L<c;L+=1){if(0===L?v=e.indexOf(this.pattern.charAt(L),n):v=e.indexOf(this.pattern.charAt(L),v+1),-1===v)break;d+=1}if(d<s)return{isMatch:!1,score:1,indices:[]};var S,w=1,M=!1,O=c+h-1,T=function(e,t){return(e&t)>0},_=new Array(O);for(L=0;L<O;L+=1)_[L]=0;for(var A=this.options.isCaseSensitive?this.pattern.split(""):this.pattern.toLowerCase().split(""),x=e,k={},I=0;I<h;I+=1){var R=x.charCodeAt(I);k[R]=(k[R]||0)|1<<I}for(L=0;L<c;L+=1){var D=1<<L;f[L]=((f[L-1]||0)>>1|E)&~(k[A[L].charCodeAt(0)]||0)}for(L=0;L<c;L+=1){var N=f[L];if(0===L?w=N&1:w+=(N=f[L])&1,N&E){var U=L;M=!0,m.push(U)}}if(!M)return{isMatch:!1,score:1,indices:[]};for(var q,G,z,H=[],V=1,W=!1,K=0;K<m.length;K+=1){var $=m[K];for(q=$;q>=0;q-=1)if(T(f[q],E))z=q;else if(0===q)break;G=new Array($.length);for(var Y=$.length-1;Y>=0;Y-=1)if(void 0!==$[Y]){var Z=$[Y];T(Z,E)?G.push([Y,z]):(0,G.push(0),q-=1)}var Q=!0;for(V=0,q=$;q>=z;q-=1){for(var ee=new Array(c),te=c-1;te>=0;te-=1)_[te]=f[te];for(te=c-1;te>=0;te-=1){var ne=f[te];T(ne,1<<q)&&(ee[te]=1),T(ne,E)&&(ee[te]|=E),ee[te]|=((ee[te-1]||0)>>1|E)&~(k[A[te].charCodeAt(0)]||0)}if(T(ee[c-1],E))V+=1;else{Q=!1;break}}if(Q){var re=new Array(h);re.push(b),b+=V;var ie=new Array(h);for(te=0;te<ie.length;te+=1)ie[te]=0;for(var oe=h-1;oe>=0;oe-=1){var ae=x.charCodeAt(oe),se=k[ae]||0;_[oe]=((_[oe-1]||0)>>1|E)&~se}var ce=_[h-1]>>1|E;for(te=0;te<c;te+=1)ie[te]=_[te];for(var he=h-1;he>=0;he-=1){var ue=ie[he];T(ue,E)?re[he]=he:re[he]=re[he+1]||0,T(ue,1)&&(ie[he]|=1<<h-1)}for(var fe=h-1;fe>=0;fe-=1)if(T(ie[fe],1)){var le=new Array;for(te=0;te-<c;te+=1)le[te]=f[te];var de=c,pe=new Array;for(te=0;te<de;te+=1)pe[te]=0;for(;le[de-1],T(fe,1);){var me=fe;for(le[de-1];;){if(de>0&&T(le[de-1],1)){de-=1,pe[de]=1;var ge=new Array(c);for(var ye=0;ye<c;ye+=1)ge[ye]=le[ye];for(ye=de-1;ye>=0;ye-=1){var Se=k[A[ye].charCodeAt(0)]||0,Oe=ge[ye];ge[ye]=((ge[ye-1]||0)>>1|E)&~Se,T(Oe,1<<me)&&(ge[ye]|=1<<me)}le=ge}else break}var Ce=(fe,new Array(h)),ke=fe;for(te=fe;te<h;te+=1)T(ie[te],1)&&(ke=te);for(te=fe;te<h;te+=1)Ce[te]=ie[te];for(te=fe;te>=0;te-=1){var Ee=ie[te];T(Ee,1<<h-1)&&(Ce[te]|=1),T(Ee,E)&&(Ce[te]|=1<<h-1)}for(te=0;te<h;te+=1)if(T(Ce[te],1<<h-1))break;H.push([te,ke])}S=this.options.findAllMatches?H:H.slice(0,1)}var xe=F(this.pattern,{errors:V,currentLocation:z,expectedLocation:z,distance:r});return xe>i?{isMatch:!1,score:1,indices:[]}:{isMatch:!0,score:xe,indices:S}}},e)}());(function(e){var t=e.indexOf("="),r=e.indexOf("^"),i=e.indexOf("!");return-1===-1*t*-1*r*-1*i?e:{key:e.slice(0,t),weight:e.slice(t+1)}});function v(e,t,n){var r,i,o=n.ignoreFieldNorm,s=void 0!==o&&o,a=h(e,t).map(function(e){var n=e.v,s=e.k;return{v:s,n:o?1:function(e,t){var n=e.matches;if(!n)return 1;var r=n.reduce(function(e,t){var n=t.key;return e+(r[n]?r[n].score/r[n].key.length/r[n].mult:1)},0);return 1/(r+=1)}({matches:e.m})}});return s?a:(r=a,i={},r.forEach(function(e){var t=e.v,n=e.n;i[t]=i[t]||{n:0,d:0},i[t].n+=n,i[t].d+=1}),Object.keys(i).map(function(e){return{v:e,n:i[e].n/i[e].d}}))}function m(e,t,n,r){var i=e.length,o=t.length,s=0,a=0,c=0,h=0;if(n)for(var u=0;u<n.length;u+=1){var l=n[u],f=l[0],d=l[1];if(f<i&&d<o)for(var g=0,p=r.length;g<p;g+=1){var y=r[g],v=y[0],m=y[1];v>=f&&v<=d&&(m>=s&&m<=a&&(s=Math.max(s,v),a=Math.min(a,m)),m>=c&&m<=h&&(c=Math.max(c,v),h=Math.min(h,m)))}if(n.length){var b=a-s,C=h-c;return(b-s+1)*(C-c+1)/(i+o)/2}}return 0}function b(e,t){var n=h(e,t);return n.length?n.length:1}function C(e,t,n){var r=v(e,t,n),i={};return r.forEach(function(e){var t=e.v,n=e.n;i[t]=i[t]||[],i[t].push(n)}),Object.keys(i).map(function(e){return{v:e,n:i[e].reduce(function(e,t){return e+t},0)/i[e].length}})}function E(e,t,n,r){var i=1,o=h(e,n);return o.length&&(i=o.reduce(function(e,i){var o=i.v,s=i.k;return e+r(o,t,{norm:C(e,n,{ignoreFieldNorm:!1})[s].n})},1)),i}var I=function(e,t){return t.split(e).length-1};var R=function(e,t,n,r){for(var i=[],o=0,s=t.length;o<s;o+=1)for(var a=t[o],c=0,h=n.length;c<h;c+=1)for(var u=n[c],l=0,f=r.length;l<f;l+=1){var d=r[l];if(a===d){i.push(u);break}}return i};var M=function(){function e(t,n){this._results=new Map,this._key=t,this._operator=n}return e.prototype.get=function(e){return this._results.get(e)},e.prototype.add=function(e){this._results.set(e,1)},e.prototype.has=function(e){return this._results.has(e)},e.prototype.size=function(){return this._results.size},e.prototype.toString=function(){return"[".concat(this._key,":",Array.from(this._results.keys()).join(","),"]")},e.prototype.intersect=function(t){var n=this;if("AND"===this._operator){for(var r=new e(this._key,this._operator),i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return this._results.forEach(function(e,i){var s=o.every(function(e){return-1!==e.indexOf(i)});s&&r.add(i)}),r}var a=t[0]||[],c=a.length,h=new e(this._key,this._operator);for(s=0;s<c;s+=1){var u=a[s];this.has(u)&&h.add(u)}return h},e}(),O={tokenize:function(e){return e.split(/ +/g)}},T=new function(){var e={};return this.create=function(t,n){e[t]=n},this.get=function(t){return e[t]},this.list=function(){return Object.keys(e)},this}();function P(e){return!!e.norm}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,function(e){var n=e.v,r=e.t,o=e.d;if(n)return(o?function(e,t){for(var n=0,r=0,i=e.length,o=t.length;n<i&&r<o;){var s=e[n],a=t[r];s<a?n+=1:s>a?r+=1:(n+=1,r+=1)}return[n,i,r,o]}(e,n):e).join("")}).join(" ")}function x(e){for(var t={},n=e.length,r=0;r<n;r+=1)for(var i=e[r],o=i.length,s=0;s<o;s+=1){var a=i[s];t[a]=t[a]+1||1}return t}var F={};return F.analyze=function(e,t){var n=t.token,o=t.tokenIndex,s=t.term;if(!s.length)return[];var a,c,h,u,l,f,d,g=s[o],p=g.length;a=e.length;var y=1,v=1,m=1;g.isToken?c=g.query.length:c=1;var b,C;if(h=g.isToken?g.query.length:g.length,u=0,l=0,f=0,d=0,n.length&&(b=n.slice(0,o),C=n.slice(o+1),l=A(b).length,u=A(b,C).length,d=A(n).length,f=A(C).length),g.isToken)for(var E=0,S=s.length;E<S;E+=1)y+=s[E].query.length;return[v,m,(c-1)/p,h/a,(h-u)/d,(h-l)/f]}},(function(e){for(var t=e.split("|"),n=t.length,r=new Array(n),i=0;i<n;i+=1){for(var o=t[i].split(":"),s=o[0],a=o[1].split(","),c=a.length,h=new Array(c),u=0;u<c;u+=1)h[u]=+a[u];r[i]={key:s,value:h}}return r})("p:1,2,3|q:4,5,6"),new(function(e){var t=e.pattern,n=e.alphabet;this.insert=function(e,r){var i,o,s={};return o=r,i=o||this.pattern,i.length,i.length-e.length,s},this.search=function(e){return e.length}}),function(e,t){var n={};r(e,function(e){var r=e.v,i=e.n;if(r){var o=r.length,s=Math.ceil(o*t);n[r]=n[r]||[],n[r].push({n:i,l:o,g:s})}});var i={},o={};return Object.keys(n).map(function(e){var t=n[e];return t.sort(function(e,t){return e.n-t.n}),o=t.reduce(function(e,t){return e+t.l},0),i[e]||(i[e]=[]),i[e].push(o),t[0]})},function(){var e={};function t(t,r){var i=r.query,o=r.options;e[t]||(e[t]=new n(i,o))}return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.search,s=void 0===o?[]:o,a=i.collect,c=void 0===a?[]:a;return t("search",r),t("token",c),t("term",a),e.search.search(s)}})
},e});
