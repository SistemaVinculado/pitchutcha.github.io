document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.body;e&&e.addEventListener("click",()=>{const e=t.classList.contains("dark")?"light":"dark";localStorage.setItem("theme",e),"dark"===e?t.classList.add("dark"):t.classList.remove("dark")});const n=localStorage.getItem("theme")||"light";"dark"===n?t.classList.add("dark"):t.classList.remove("dark");const o=document.querySelectorAll(".header-search-form, .main-search-form");function c(e){e.preventDefault();const t=this.querySelector('input[type="search"], input[type="text"]');if(t){const n=t.value.trim();n&&(window.location.href=`/pitchutcha.github.io/search.html?q=${encodeURIComponent(n)}`)}}o.forEach(e=>{e.addEventListener("submit",c)});const a=document.getElementById("search-input");if(a){const i=new URLSearchParams(window.location.search).get("q");i&&(a.value=i,a.dispatchEvent(new Event("input",{bubbles:!0})))}const s=document.getElementById("homepage-status-indicator"),r=document.getElementById("homepage-status-text");if(s&&r){const l=e=>{const t=s.querySelector(".ping-pulse"),n=s.querySelector(".relative.inline-flex");t.className="ping-pulse",n.className="relative inline-flex rounded-full h-3 w-3";const o={ok:{pulse:"ping-green",dot:"bg-green-500",text:"Todos os sistemas operacionais"},down:{pulse:"ping-red",dot:"bg-red-500",text:"Instabilidade nos sistemas"},error:{pulse:"ping-yellow",dot:"bg-yellow-500",text:"Não foi possível verificar"}},c=o[e]||o.error;t.classList.add(c.pulse),n.classList.add(c.dot),r.textContent=c.text};fetch("uptime-data.json?cache_bust="+Date.now()).then(e=>e.ok?e.json():Promise.reject("Network response was not ok")).then(e=>{const t=e?.monitors?.[0];2===t?.status?l("ok"):8===t?.status||9===t?.status?l("down"):l("error")}).catch(e=>{console.error("Falha ao buscar status para a homepage:",e),l("error")})}const u=window.location.pathname.split("/").pop();if(u){const d=document.querySelectorAll("nav a");d.forEach(e=>{const t=e.getAttribute("href").split("/").pop();u===t&&(e.style.color="var(--primary-color)",e.style.fontWeight="600")})}});
