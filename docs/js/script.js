document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.body;e&&e.addEventListener("click",()=>{t.classList.toggle("dark")});const n=document.querySelectorAll(".header-search-form, .main-search-form");function o(e){e.preventDefault();const t=this.querySelector('input[type="search"], input[type="text"]');if(t){const n=t.value.trim();n&&(window.location.href=`/pitchutcha.github.io/search.html?q=${encodeURIComponent(n)}`)}}n.forEach(e=>{e.addEventListener("submit",o)});const c=document.getElementById("search-input");if(c){const r=new URLSearchParams(window.location.search).get("q");r&&(c.value=r,c.dispatchEvent(new Event("input",{bubbles:!0})))}const a=document.getElementById("status-indicator-dot"),i=document.getElementById("status-indicator-text");a&&i&&fetch("uptime-data.json?cache_bust="+Date.now()).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{if("ok"===e.stat&&e.monitors&&e.monitors.length>0){const t=e.monitors[0];2===t.status?(a.classList.remove("bg-gray-400"),a.classList.add("bg-green-500"),i.textContent="Todos os sistemas operacionais"):8===t.status||9===t.status?(a.classList.remove("bg-gray-400"),a.classList.add("bg-red-500"),i.textContent="Instabilidade nos sistemas"):(a.classList.remove("bg-gray-400"),a.classList.add("bg-yellow-500"),i.textContent="Status incerto")}else throw new Error("Invalid data format")}).catch(e=>{console.error("Falha ao buscar status para a homepage:",e),a.classList.remove("bg-gray-400"),a.classList.add("bg-yellow-500"),i.textContent="Não foi possível verificar"})});
