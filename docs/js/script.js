document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("theme")||"light";"dark"===e?document.body.classList.add("dark"):document.body.classList.remove("dark");const t=document.getElementById("theme-toggle");t&&t.addEventListener("click",()=>{const e=document.body.classList.contains("dark")?"light":"dark";localStorage.setItem("theme",e),"dark"===e?document.body.classList.add("dark"):document.body.classList.remove("dark")});const n=document.querySelectorAll(".header-search-form, .main-search-form");function o(e){e.preventDefault();const t=this.querySelector('input[type="search"], input[type="text"]');if(t){const n=t.value.trim();n&&(window.location.href=`/pitchutcha.github.io/search.html?q=${encodeURIComponent(n)}`)}}n.forEach(e=>{e.addEventListener("submit",o)});const c=document.getElementById("search-input");if(c){const a=new URLSearchParams(window.location.search).get("q");a&&(c.value=a,c.dispatchEvent(new Event("input",{bubbles:!0})))}const i=document.getElementById("homepage-status-indicator"),s=document.getElementById("homepage-status-text");if(i&&s){const r=e=>{const t=i.querySelector(".ping-pulse"),n=i.querySelector(".relative.inline-flex");t.className="ping-pulse",n.className="relative inline-flex rounded-full h-3 w-3";const o={ok:{pulse:"ping-green",dot:"bg-green-500",text:"Todos os sistemas operacionais"},down:{pulse:"ping-red",dot:"bg-red-500",text:"Instabilidade nos sistemas"},error:{pulse:"ping-yellow",dot:"bg-yellow-500",text:"Não foi possível verificar"}},c=o[e]||o.error;t.classList.add(c.pulse),n.classList.add(c.dot),s.textContent=c.text};fetch("uptime-data.json?cache_bust="+Date.now()).then(e=>e.ok?e.json():Promise.reject("Network response was not ok")).then(e=>{const t=e?.monitors?.[0];2===t?.status?r("ok"):8===t?.status||9===t?.status?r("down"):r("error")}).catch(e=>{console.error("Falha ao buscar status para a homepage:",e),r("error")})}const l=window.location.pathname.split("/").pop();if(l){const d=document.querySelectorAll("nav a");d.forEach(e=>{const t=e.getAttribute("href").split("/").pop();l===t&&(e.style.color="var(--primary-color)",e.style.fontWeight="600")})}});
