document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.body;e&&e.addEventListener("click",()=>{t.classList.toggle("dark")});const n=document.querySelectorAll(".header-search-form, .main-search-form");function o(e){e.preventDefault();const t=this.querySelector('input[type="search"], input[type="text"]');if(t){const n=t.value.trim();n&&(window.location.href=`/pitchutcha.github.io/search.html?q=${encodeURIComponent(n)}`)}}n.forEach(e=>{e.addEventListener("submit",o)});const c=document.getElementById("search-input");if(c){const r=new URLSearchParams(window.location.search).get("q");r&&(c.value=r,c.dispatchEvent(new Event("input",{bubbles:!0})))}const a=document.getElementById("homepage-status-indicator"),i=document.getElementById("homepage-status-text");if(a&&i){const s=e=>{const t=a.querySelector(".ping-pulse"),n=a.querySelector(".relative.inline-flex");t.className="ping-pulse",n.className="relative inline-flex rounded-full h-3 w-3";const o={ok:{pulse:"ping-green",dot:"bg-green-500",text:"Todos os sistemas operacionais"},down:{pulse:"ping-red",dot:"bg-red-500",text:"Instabilidade nos sistemas"},error:{pulse:"ping-yellow",dot:"bg-yellow-500",text:"Não foi possível verificar"}},c=o[e]||o.error;t.classList.add(c.pulse),n.classList.add(c.dot),i.textContent=c.text};fetch("uptime-data.json?cache_bust="+Date.now()).then(e=>e.ok?e.json():Promise.reject("Network response was not ok")).then(e=>{const t=e?.monitors?.[0];2===t?.status?s("ok"):8===t?.status||9===t?.status?s("down"):s("error")}).catch(e=>{console.error("Falha ao buscar status para a homepage:",e),s("error")})}});
